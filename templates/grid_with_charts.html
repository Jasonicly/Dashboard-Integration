<!-- grid_with_charts.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Visualization with AI Input</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.0/echarts.min.js"></script>
    <style>
        body {
            margin: 0;
            display: grid;
            grid-template-columns: repeat(8, 1fr); /* 8 columns */
            grid-auto-rows: minmax(100px, auto); /* Auto rows with a minimum height */
            gap: 5px;
            background: #f8f8f8;
            height: 100vh; /* Full viewport height */
            overflow-y: auto; /* Add vertical scrolling */
        }

        .chart-container {
            background: #fff;
            border: 1px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box; /* Ensure padding is included in size */
            overflow: hidden; /* Prevent content from overflowing */
            width: 100%; /* Match grid cell width */
            height: 100%; /* Match grid cell height */
        }
    </style>
</head>
<body id="chartGrid"></body>

<script>
    /**
     * Visualization Templates
     */
    function createRadarChart(container, data, title) {
        var chart = echarts.init(container);
        chart.setOption({
            title: { text: title },
            radar: {
                radius: '25%', // Adjust the radius to make the chart smaller
                indicator: data.indicators
            },
            series: [{
                type: 'radar',
                data: [{
                    value: data.values,
                    name: title
                }]
            }]
        });
        window.addEventListener('resize', function() {
            chart.resize();
        });
    }

    function createPieChart(container, data, title) {
        var chart = echarts.init(container);
        chart.setOption({
            title: { text: title, left: 'center' },
            series: [{
                type: 'pie',
                radius: '50%',
                data: data
            }]
        });
    }

    function createLineChart(container, data, title) {
        var chart = echarts.init(container);
        chart.setOption({
            title: { text: title },
            xAxis: { type: 'category', data: data.categories },
            yAxis: { type: 'value' },
            series: [{ data: data.values, type: 'line' }]
        });
    }

    function createScatterPlot(container, data, title) {
        var chart = echarts.init(container);
        chart.setOption({
            title: { text: title },
            xAxis: { type: 'value' },
            yAxis: { type: 'value' },
            series: [{ data: data, type: 'scatter', symbolSize: 10 }]
        });
    }

    function createAreaChart(container, data, title) {
        var chart = echarts.init(container);
        chart.setOption({
            title: { text: title },
            xAxis: { type: 'category', data: data.categories },
            yAxis: { type: 'value' },
            series: [{
                data: data.values,
                type: 'line',
                areaStyle: {}
            }]
        });
    }

    function createHeatmap(container, data, xCategories, yCategories, title) {
        var chart = echarts.init(container);
        chart.setOption({
            title: { text: title },
            xAxis: { type: 'category', data: xCategories },
            yAxis: { type: 'category', data: yCategories },
            visualMap: {
                min: 0,
                max: 10,
                inRange: {
                    color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027']
                }
            },
            series: [{
                name: 'Heatmap',
                type: 'heatmap',
                data: data,
                emphasis: {
                    itemStyle: {
                        borderColor: '#333',
                        borderWidth: 1
                    }
                }
            }]
        });
    }

    /**
     * Dynamic Visualization Creator
     * @param {Array} visuals - Array of visualization objects
     */
    function CreateVisuals(visuals) {
        const chartGrid = document.getElementById('chartGrid');

        visuals.forEach(visual => {
            // Create a chart container
            const container = document.createElement('div');
            container.className = 'chart-container';
            container.id = visual.id;

            // Set grid size (grid-column and grid-row)
            container.style.gridColumn = `span ${visual.size.columns}`;
            container.style.gridRow = `span ${visual.size.rows}`;

            // Append to grid
            chartGrid.appendChild(container);

            // Generate the chart based on type
            switch (visual.type) {
                case 'radar':
                    createRadarChart(container, visual.data, visual.title);
                    break;
                case 'pie':
                    createPieChart(container, visual.data, visual.title);
                    break;
                case 'line':
                    createLineChart(container, visual.data, visual.title);
                    break;
                case 'scatter':
                    createScatterPlot(container, visual.data, visual.title);
                    break;
                case 'area':
                    createAreaChart(container, visual.data, visual.title);
                    break;
                case 'heatmap':
                    createHeatmap(container, visual.data, visual.xCategories, visual.yCategories, visual.title);
                    break;
                default:
                    console.error(`Unknown chart type: ${visual.type}`);
            }
        });
    }

    /**
     * Example: AI-defined visualizations
     */
    CreateVisuals([
        {
            id: 'chart1',
            type: 'radar',
            title: 'Radar Chart Example',
            data: {
                indicators: [
                    { name: 'Metric A', max: 100 },
                    { name: 'Metric B', max: 100 },
                    { name: 'Metric C', max: 100 },
                    { name: 'Metric D', max: 100 },
                    { name: 'Metric E', max: 100 }
                ],
                values: [90, 80, 70, 60, 100]
            },
            size: { columns: 4, rows: 4 }
        },
        {
            id: 'chart2',
            type: 'pie',
            title: 'Pie Chart Example',
            data: [
                { value: 1048, name: 'Search Engine' },
                { value: 735, name: 'Direct' },
                { value: 580, name: 'Email' },
                { value: 484, name: 'Union Ads' },
                { value: 300, name: 'Video Ads' }
            ],
            size: { columns: 2, rows: 4 }
        },
        {
            id: 'chart3',
            type: 'line',
            title: 'Line Chart Example',
            data: { categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May'], values: [50, 70, 90, 110, 130] },
            size: { columns: 6, rows: 6 }
        },
        {
            id: 'chart4',
            type: 'scatter',
            title: 'Scatter Plot Example',
            data: [[10, 20], [20, 30], [30, 50], [40, 80], [50, 100]],
            size: { columns: 4, rows: 8 }
        },
        {
            id: 'chart5',
            type: 'area',
            title: 'Area Chart Example',
            data: { categories: ['Q1', 'Q2', 'Q3', 'Q4'], values: [120, 200, 150, 300] },
            size: { columns: 4, rows: 6 }
        },
        {
            id: 'chart6',
            type: 'heatmap',
            title: 'Heatmap Example',
            data: Array.from({ length: 100 }, () => [Math.random() * 10, Math.random() * 10, Math.random() * 10]),
            xCategories: Array.from({ length: 10 }, (_, i) => `X${i + 1}`),
            yCategories: Array.from({ length: 10 }, (_, i) => `Y${i + 1}`),
            size: { columns: 6, rows: 6 }
        }
    ]);
</script>
</html>
